services:
  dev-con:
    image: exarrow-dev:1.0
    build:
      context: .
      dockerfile: Dockerfile
      args:
        TZ: ${TZ:-UTC}
    container_name: dev-con
    cap_add:
      - NET_ADMIN
      - NET_RAW
    ports:
      - "23:22"
    volumes:
      - ..:/workspace:cached
    environment:
      - RUST_BACKTRACE=1
      - EXASOL_HOST=dev-exa-db
      - EXASOL_PORT=8563
    networks:
      - devnet
    depends_on:
      dev-exa-db:
        condition: service_started

  dev-exa-db:
    image: exasol/docker-db:2025.2.0-arm64dev.0
    container_name: dev-exa-db
    privileged: true
    ports:
      - "8564:8563"
    networks:
      - devnet

networks:
  devnet:
    driver: bridge
